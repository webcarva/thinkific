/*
 technical 2017-04-02 
*/

$(document).ready(function(){var a=[],b=[],c=0,d=function(){return $(".tune.active source").each(function(c){var d=$(this).attr("src"),e=$(this).attr("type");a[c]=d,b[c]=e}),e=new Audio(a),$.each(b,function(c){if(e.canPlayType(b[c]+";"))return e.type=b[c],e.src=a[c],!1}),e},e=d();$(".player-playlist ul li").on("click",function(){$(".player-playlist ul li").removeClass("active"),h.trigger("click"),$(this).addClass("active"),$("img.active").attr("src",$(this).data("img")),$("h1.title").html($(this).data("title")),$("h2.album").html($(this).data("album")),$("h2.artist").html($(this).data("artist"));var a=$(this).data("asset");a=a.split(",");var b=$(this).data("type");b=b.split(","),$(".player-audio.tune.active source").remove(),$.each(a,function(c){$(".player-audio.tune.active").append('<source src="'+a[c]+'" type="'+b[c]+'">')});d();m()});var f,g=$(".play"),h=$(".pause"),i=$(".rewind"),j=$(".fastforward"),k=$(".next"),l=$(".back");g.on("click",function(a){e.play(),$(this).hide(),h.fadeIn()}),h.on("click",function(a){e.pause(),$(this).hide(),g.fadeIn()}),i.on("mousedown",function(){f=setInterval(function(){var a=e.currentTime;e.currentTime=a>=3?a-3:0,e.playbackRate=-3},500)}),i.on("mouseup",function(){clearInterval(f),e.playbackRate=1}),j.on("mousedown",function(){e.playbackRate=3}),j.on("mouseup",function(){e.playbackRate=1});var m=function(){e.addEventListener("timeupdate",function(){$(".player-end").html("0:00");var a=e.currentTime,b=e.duration;$(".player-progress").stop(!0,!0).animate({width:(a+.25)/b*100+"%"},250,"linear");var c="0"+Math.floor(a/60),d="0"+Math.floor(a-60*c),f=c.substr(-1)+":"+d.substr(-2);if($(".player-start").html(f),e.duration){var g="0"+Math.floor(b/60),h="0"+Math.floor(b-60*c),i=g.substr(-1)+":"+h.substr(-2);$(".player-end").html(i)}})};k.on("click",function(){c===$(".player-playlist ul li").size()-1?c=0:c++,console.log(c),$(".player-playlist ul li[data-index='"+c+"']").click()}),l.on("click",function(){0===c?c=$(".player-playlist ul li").size()-1:c--,$(".player-playlist ul li[data-index='"+c+"']").click()})});